# –ù–æ–≤–∞—è –∂–∏–∑–Ω—å –¥–ª—è —Å—Ç–∞—Ä–æ–≥–æ –ø–ª–∞–Ω—à–µ—Ç–∞: Galaxy Tab 2 —Å postmarketOS –∫–∞–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä

---

# üì± PostmarketOS –Ω–∞ Samsung Galaxy Tab 2 (GT-P3110) ‚Äî –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä

## üìñ –û –ø—Ä–æ–µ–∫—Ç–µ
–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø–æ—Å–≤—è—â—ë–Ω –º–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏–∏ —É—Å—Ç–∞—Ä–µ–≤—à–µ–≥–æ –ø–ª–∞–Ω—à–µ—Ç–∞ **Samsung Galaxy Tab 2 (GT-P3110)** —Å –ø–æ–º–æ—â—å—é —É—Å—Ç–∞–Ω–æ–≤–∫–∏ **postmarketOS** –∏ –µ–≥–æ –ø—Ä–µ–≤—Ä–∞—â–µ–Ω–∏—é –≤ –ª—ë–≥–∫–∏–π –∏ —ç–Ω–µ—Ä–≥–æ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –≤–µ–±-—Å–µ—Ä–≤–µ—Ä.

–í —Ö–æ–¥–µ —Ä–∞–±–æ—Ç—ã –±—ã–ª–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ:
- üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ **TWRP Recovery** –¥–ª—è –ø—Ä–æ—à–∏–≤–∫–∏ —á–µ—Ä–µ–∑ ADB sideload.
- üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–∑–∞ postmarketOS (XFCE4 + OpenRC)(–µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã, –Ω–æ —Ç–∞–∫ –∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–±—Ä–∞–∑ —á–µ—Ä–µ–∑ **pmbootstrap**).
- üîê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —É–¥–∞–ª—ë–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –ø–æ **SSH**, –∏–∑–º–µ–Ω–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤–∏–ª **nftables**.
- üê≥ –ó–∞–ø—É—Å–∫ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ **Docker** –∏ **Docker Compose** –Ω–∞ ARMv7-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ.
- üåê –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∫ —Ä–æ–ª–∏ **–º–∏–Ω–∏-–≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞** –¥–ª—è –¥–æ–º–∞—à–Ω–∏—Ö –∏–ª–∏ —É—á–µ–±–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

üí° **–ò–¥–µ—è:** –ø–æ–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ Android-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –ø—Ä–µ–≤—Ä–∞—â–∞—è –∏—Ö –≤ –ø–æ–ª–µ–∑–Ω—ã–µ —Å–µ—Ä–≤–µ—Ä—ã —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º.

---

# üì≤ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±—Ä–∞–∑–∞ 

- –ö–∞–∫ —Å–¥–µ–ª–∞—Ç—å —Å–≤–æ–π –∫–∞—Å—Ç–æ–º–Ω—ã–π –æ–±—Ä–∞–∑ —É–∫–∞–∑–∞–Ω–æ –∑–¥–µ—Å—å [pmbootstrap](https://wiki.postmarketos.org/wiki/Pmbootstrap/Using_pmbootstrap), —è –≤—ã–±—Ä–∞–ª xfce4 —Ç–∞–∫ –∫–∞–∫ –æ–Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –ª–µ–≥–∫–∞—è –∏ —É–∂–µ –º–Ω–µ –ø—Ä–∏–≤—ã—á–Ω–∞—è
- –ù–æ —è –Ω–∞—à—ë–ª –≥–æ—Ç–æ–≤—ã–π –æ–±—Ä–∞–∑ –Ω–∞ —Å–∞–π—Ç–µ [PostmarketOS –¥–ª—è Samsung Galaxy Tab 2 7.0](https://images.postmarketos.org/bpo/v25.06/samsung-espresso7/)
- –£—Å—Ç–∞–Ω–æ–≤–∏–ª —á–µ—Ä–µ–∑ [TWRP](https://eu.dl.twrp.me/p3110/). –û–ø–∏—Å–∞–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ TWRP –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è ‚Äî –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤.
- –ò –¥–∞–ª—å—à–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∏ –º—ã –≤–∏–¥–∏–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–∫–Ω–æ –∏–º—è —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏ user, –ø–∞—Ä–æ–ª—å 147147

---

# üì° –ù–∞—Å—Ç—Ä–æ–π–∫–∞ nftables –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –ø–æ SSH –Ω–∞ postmarketOS

–î–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫–∞–∫ –º—ã –æ—Ç–∫—Ä—ã–ª–∏ –¥–æ—Å—Ç—É–ø –ø–æ SSH –Ω–∞ –∫–∞—Å—Ç–æ–º–Ω–æ–π —Å–±–æ—Ä–∫–µ postmarketOS, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π –Ω–∞ Samsung Galaxy Tab 2 (GT-P3110).

## 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ nftables
```bash
doas apk add nftables
```
## 2Ô∏è‚É£ –í–∫–ª—é—á–µ–Ω–∏–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
```bash
doas rc-update add nftables default
doas rc-service nftables start
```
## 3Ô∏è‚É£ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
–û—Ç–∫—Ä—ã–≤–∞–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª:
```bash
doas apk add nano
doas nano /etc/nftables.conf
```
## 4Ô∏è‚É£ –°–∞–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, —Ç–∞–∫ –∂–µ –µ—Å—Ç—å –≤ —Ä–µ–ø–∞–∑–∏—Ç–æ—Ä–∏–∏:
```bash
#!/usr/sbin/nft -f

table inet filter {
    chain input {
        type filter hook input priority 0;
        policy drop;

        # –õ–æ–∫–∞–ª—å–Ω—ã–π —Ç—Ä–∞—Ñ–∏–∫
        iif lo accept

        # –£–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
        ct state established,related accept

        # SSH (–ø–æ—Ä—Ç 22 –∏–ª–∏ —Å–≤–æ–π)
        tcp dport 22 accept comment "Accept SSH"

        # –†–∞–∑—Ä–µ—à–∏—Ç—å ping
        icmp type echo-request accept comment "Allow Ping"
    }
}
```
## 5Ô∏è‚É£ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
```bash
doas nft -f /etc/nftables.conf
```
## 6Ô∏è‚É£ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª
```bash
doas rc-service nftables save
```
# üê≥ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ Docker –Ω–∞ OpenRC
## 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
```bash
doas apk add docker docker-compose
```
## 2Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
```bash
doas adduser $–≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å docker
```
–ò –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏–ª, —á—Ç–æ –¥–æ–∫–µ—Ä –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤–≤–æ–¥–∞ –∫–æ–º–∞–Ω–¥—ã, —Ç–∞–∫ –∫–∞–∫ —Å–∞–º docker –Ω–µ –≤–∏–¥–∏—Ç —Å–µ—Ç–∏ –∏ —Å—Ä–∞–∑—É –ø–∞–¥–∞–µ—Ç:
```bash
doas rc-service docker start
```
–ù–æ —Ç–∞–∫ –∫–∞–∫ –º—ã –¥–µ–ª–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω—É—é —Å–∏—Å—Ç–µ–º—É –¥–æ–±–∞–≤–ª—è–µ–º docker –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É –∏ –ø–∏—à–µ–º bash —Å–∫—Ä–∏–ø—Ç: 
## 3Ô∏è‚É£ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Docker –≤ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫—É 
```bash
doas rc-update add docker default
```
## 4Ô∏è‚É£ –¢–∞–∫–∂–µ —Å–æ–∑–¥–∞–µ–º —Ñ–∞–π–ª –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ /etc/init.d/docker-wait —Å —Å–æ–¥–µ—Ä–∂–∏–º—ã–º:
```bash
#!/sbin/openrc-run
command="/usr/bin/true"
description="Wait for network to get IP and then start docker"

depend() {
    need net
    after wpa_supplicant NetworkManager  # –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ —É–±—Ä–∞—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω—É–∂–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä
}

start() {
    ebegin "Waiting for network to be up (max 60s)"
    for i in $(seq 1 60); do
        # –ø—Ä–æ–≤–µ—Ä—è–µ–º –µ—Å—Ç—å –ª–∏ IPv4 –∞–¥—Ä–µ—Å –Ω–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö
        if ip -4 addr show scope global | grep -q "inet "; then
            eend 0
            ebegin "Starting docker"
            doas rc-service docker start
            eend $?
            return 0
        fi
        sleep 1
    done
    eend 1
    return 1
}
```
—Ç–∞–∫–∂–µ —Ñ–∞–π–ª –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω –≤ —Ä–µ–ø–∞–∑–∏—Ç–æ—Ä–∏–∏ 
## 5Ô∏è‚É£ –ò –¥–∞—ë–º –ø—Ä–∞–≤–∞ –Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é, –∞ —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª—è–µ–º –≤ OpenRC:
```bash
doas chmod +x /etc/init.d/docker-wait
doas rc-update add docker-wait default
```
---
# üîã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞—Ä—è–¥–æ–º –±–∞—Ç–∞—Ä–µ–∏ –¥–ª—è –ø—Ä–æ–¥–ª–µ–Ω–∏—è –µ—ë —Ä–µ—Å—É—Ä—Å–∞: –¥–æ–ø—É—Å–∫–∞—Ç—å –∑–∞—Ä—è–¥ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 20‚Äì90%

## 1Ô∏è‚É£ –°–∫—Ä–∏–ø—Ç –¥–ª—è postmarketOS, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å —É—Ä–æ–≤–µ–Ω—å –±–∞—Ç–∞—Ä–µ–∏ –∏ –¥–µ—Ä–∂–∞—Ç—å –µ—ë –º–µ–∂–¥—É 20% –∏ 90%:
```bash
#!/bin/sh
# battery_manager.sh
# –°–ª–µ–¥–∏—Ç –∑–∞ —É—Ä–æ–≤–Ω–µ–º –±–∞—Ç–∞—Ä–µ–∏ –∏ —É–≤–µ–¥–æ–º–ª—è–µ—Ç –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ø–æ—Ä–æ–≥–æ–≤
# WARNING: –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞—Ä—è–¥–∫–∏ –≤–æ–∑–º–æ–∂–Ω–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –¥—Ä–∞–π–≤–µ—Ä –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç charging_enabled

BATTERY="/sys/class/power_supply/max170xx_battery"
LOW=20
HIGH=90
CHECK_INTERVAL=60  # –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥

while true; do
    if [ ! -f "$BATTERY/capacity" ]; then
        echo "Battery info not found!"
        exit 1
    fi

    CAP=$(cat "$BATTERY/capacity")
    STATUS=$(cat "$BATTERY/status")

    # –û–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ –Ω–∏–∑–∫–æ–º –∑–∞—Ä—è–¥–µ
    if [ "$CAP" -le "$LOW" ]; then
        echo "Battery low: $CAP% ‚Äî —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∑–∞—Ä—è–¥–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ."
    fi

    # –ü–æ–ø—ã—Ç–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞—Ä—è–¥–∫—É –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ø–æ—Ä–æ–≥–∞
    if [ "$CAP" -ge "$HIGH" ] && [ "$STATUS" = "Charging" ]; then
        if [ -f "$BATTERY/charging_enabled" ]; then
            echo 0 > "$BATTERY/charging_enabled"
            echo "Battery high: $CAP% ‚Äî –∑–∞—Ä—è–¥–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞."
        else
            echo "Battery high: $CAP% ‚Äî –¥—Ä–∞–π–≤–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑–∞—Ä—è–¥–∫–∏."
        fi
    fi

    # –ï—Å–ª–∏ –±–∞—Ç–∞—Ä–µ—è –º–µ–Ω—å—à–µ –≤–µ—Ä—Ö–Ω–µ–≥–æ –ø–æ—Ä–æ–≥–∞ –∏ –∑–∞—Ä—è–¥–∫–∞ –±—ã–ª–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞, —Ä–∞–∑—Ä–µ—à–∞–µ–º –∑–∞—Ä—è–¥–∫—É
    if [ "$CAP" -lt "$HIGH" ] && [ -f "$BATTERY/charging_enabled" ]; then
        echo 1 > "$BATTERY/charging_enabled"
    fi

    sleep "$CHECK_INTERVAL"
done
```
–°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–∫—Ä–∏–ø—Ç –≤ /usr/local/bin/battery_manager.sh.

## 2Ô∏è‚É£ –°–¥–µ–ª–∞–π –µ–≥–æ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º:
```
chmod +x /usr/local/bin/battery_manager.sh
```


## 3Ô∏è‚É£ –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–∑–¥–∞–π OpenRC-—Å–µ—Ä–≤–∏—Å /etc/init.d/battery_manager –∏ —É–∫–∞–∑–∞—Ç—å pid-afqk:
```
#!/sbin/openrc-run

description="Battery manager service"
command="/usr/local/bin/battery_manager.sh"
command_background="yes"
pidfile="/run/battery_manager.pid"
depend() {
    need net
    after local
}
```


## 4Ô∏è‚É£ –ù—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–º –∏ –≤–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫:
```
chmod +x /etc/init.d/battery_manager
rc-update add battery_manager default
rc-service battery_manager start
```

–ù—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–∫—Ä–∏–ø—Ç /usr/local/bin/battery_manager.sh –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Å–∞–º, –∞ –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è.

## 5Ô∏è‚É£ –°–æ–∑–¥–∞–π—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –¥–ª—è PID:
```

sudo mkdir -p /run
sudo chown root:root /run
```

–¢–∞–∫ —Å–∫—Ä–∏–ø—Ç –±—É–¥–µ—Ç —Å–ª–µ–¥–∏—Ç—å –∑–∞ —É—Ä–æ–≤–Ω–µ–º –±–∞—Ç–∞—Ä–µ–∏ –∏ —É–≤–µ–¥–æ–º–ª—è—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞—Ç—å –∑–∞—Ä—è–¥.











